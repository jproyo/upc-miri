\documentclass[12pt, a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{graphicx}
\usepackage{parskip}
\usepackage{hyperref}
\usepackage{fancyhdr}
\usepackage{lastpage}
\usepackage{tikz}
\usepackage{float}
\usepackage{listings}
\usepackage{color}
\usepackage{caption}
\usepackage[acronym]{glossaries}
\usepackage[nottoc]{tocbibind}
\usepackage[cache=true]{minted}
\usemintedstyle{default}
\graphicspath{{./images/}}
\newminted{cpp}{frame=lines,framerule=2pt}

\tikzstyle{bag} = [align=center]

\lstset{frame=tb,
  language=Haskell,
  aboveskip=3mm,
  belowskip=3mm,
  showstringspaces=false,
  columns=flexible,
  basicstyle={\small\ttfamily},
  numbers=left,
  numberstyle=\tiny\color{gray},
  keywordstyle=\color{blue},
  commentstyle=\color{dkgreen},
  stringstyle=\color{mauve},
  breaklines=true,
  breakatwhitespace=true,
  tabsize=2,
  stepnumber=1,
  escapechar=!
}

\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}

\title{%
      Combinatorial Problem Solving \\
      Final Project - Box Wrapping \\
      Linear Programming
}
\author{%
  Juan Pablo Royo Sales \\
  \small{Universitat Politècnica de Catalunya}
}
\date\today

\pagestyle{fancy}
\fancyhf{}
\fancyhead[C]{}
\fancyhead[R]{Juan Pablo Royo Sales - UPC MIRI}
\fancyhead[L]{CPS - Final Project - LP}
\fancyfoot[L,C]{}
\fancyfoot[R]{Page \thepage{} of \pageref{LastPage}}
\setlength{\headheight}{15pt}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}

\DeclareMathOperator*{\argmax}{argmax} % thin space, limits underneath in displays

\newacronym{lp}{LP}{Linear Programming}
\newacronym{cp}{CP}{Constraint Programming}

\begin{document}

\maketitle

\section{Linear Programming}

\subsection{Predefinitions}
Values given by the state the of the program.

\begin{itemize}
  \item $1 \leq W \leq 11$ maximum width paper roll
  \item $L$ maximum length paper roll. By definition is infinite
  \item $B = \{1, \dots, n\}$ total number of Boxes
  \item $w_b$ Width of the Box $b, b \in B$
  \item $h_b$ Height of the Box $b, b \in B$
\end{itemize}

\subsection{Formal Definition}
Given the statement of the problem proposed, we are going to define the following variables for our \acrfull{lp} solution.

\subsubsection{Variables}
\begin{itemize}
  \item $x_b^{tl}$: Top \textbf{left} corner $x$. Means the box $b$ is on the top left $x$-coordinate.
  \item $y_b^{tl}$: Top \textbf{left} corner $y$. Means the box $b$ is on the top left $y$-coordinate.
  \item $x_b^{br}$: Bottom \textbf{right} corner $x$. Means the box $b$ is on the bottom right $x$-coordinate.
  \item $y_b^{br}$: Bottom \textbf{right} corner $y$. Means the box $b$ is on the bottom right $y$-coordinate.
  \item $r_b$: Boolean Array that indicates if the Box $b$ is rotated or not.
  \item $l$: Total length of the roll used at the end of the minimization problem.
\end{itemize}

As we can see I am reusing some variables that I have used in \acrfull{cp} deliverable. I am going to do the same for Bounding and Constraints. Some of them are going to be equal to previous solution in \acrshort{cp} because they are expressed linearly.

\subsubsection{Variable Bounds}
\begin{itemize}
  \item $x_b^{tl} \in \mathbb{Z}, 0 \leq x_b^{tl} \leq W-1, b \in B$
  \item $y_b^{tl} \in \mathbb{Z}, 0 \leq y_b^{tl} \leq L-1, b \in B$
  \item $x_b^{rb} \in \mathbb{Z}, 0 \leq x_b^{rb} \leq W-1, b \in B$
  \item $y_b^{rb} \in \mathbb{Z}, 0 \leq y_b^{rb} \leq L-1, b \in B$
  \item $r_b \in \{0,1\}, b \in B$
  \item $l \in \mathbb{Z}, 1 \leq L-1$
\end{itemize}


\subsubsection{Constraints}

\begin{enumerate}

  \item $l >= y_b^{tl} + r_b \times h_b + (1-r_b) \times w_b,\ \forall b \in B$: Height of the box should be $y_b^{tl}$ coordinate plus its height or width depending on if it is rotated or not.

  \item $x_b^{tl} \leq x_b^{br},\ \forall b \in B$: Each top left $x$ coordinate must be less or equal than the bottom right $x$-coordinate in each Box.

  \item $y_b^{tl} \leq y_b^{br},\ \forall b \in B$: Each top left $y$-coordinate must be less or equal than the bottom right $y$-coordinate in each Box.

  \item\label{c:4} $x_b^{tl} + (1-r_b) \times (w_b-1) + r_b \times (h_b-1) = x_b^{rb},\ \forall b \in B$: The amount of $x$ coordinates that occupies each box is the width or height of that box depends on its rotation.

  \item\label{c:5} $y_b^{tl} + (1-r_b) \times (h_b-1) + r_b \times (w_b-1) = y_b^{rb},\ \forall b \in B$: The amount of $y$ coordinates that occupies each box is the width or height of that box depends on its rotation.

  \item\label{c:6} $x_{b=i}^{tl} + r_{b=i} \times (w_{b=i} - 1) + (1-r_{b=i}) \times (h_{b=i} - 1) < x_{b=j}^{tl},\ \forall i,j | i > j$: Not overlap $x_b^{tl}$ coordinate boxes for all pair of boxes rotated or not, when box $i$ is greater box $j$.

  \item\label{c:7} $y_{b=i}^{tl} + r_{b=i} \times (h_{b=i} - 1) + (1-r_{b=i}) \times (w_{b=i} - 1) < y_{b=j}^{tl},\ \forall i,j | i > j$: Not overlap $y_b^{tl}$ coordinate boxes for all pair of boxes rotated or not, when box $i$ is greater than box $j$.

  \item\label{c:8} $x_{b=i}^{tl} < x_{b=j}^{tl},\ \forall i,j \in B,\ i \neq j,\ w_{b=i} \times h_{b=i} \geq w_{b=j} \times h_{b=j}$: For each pair of boxes try to put first the bigger box.

  \item $y_{b=i}^{tl} < y_{b=j}^{tl},\ \forall i,j \in B,\ i \neq j,\ w_{b=i} \times h_{b=i} \geq w_{b=j} \times h_{b=j}$: Same as~\ref{c:8} But for $y$ coordinates.

  \item\label{c:11} $x_{b=0}^{tl} = 0$: Breaking column symmetry and set bounds for the first element in the first position.

  \item $y_{b=0}^{tl} = 0$: Idem~\ref{c:11} but for row symmetry.

\end{enumerate}

\subsubsection{Objective Function}

Minimize the total length of each box. Remember that $l_b > 0$ only if the box $b$ is in the $x_b^{tl} = 0$ position. So we are only summing up boxes that are one bellow the other.

\begin{subequations}
  \begin{align}
   \min \sum_{i=0}^B l_b
  \end{align}
\end{subequations}


\end{document}

