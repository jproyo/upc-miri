\documentclass[12pt, a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amsfonts}
\usepackage{graphicx}
\usepackage{parskip}
\usepackage{hyperref}
\usepackage{fancyhdr}
\usepackage{lastpage}
\usepackage{tikz}
\usepackage{float}
\usepackage{listings}
\usepackage{color}
\usepackage{caption}
\usepackage[acronym]{glossaries}
\usepackage[nottoc]{tocbibind}
\usepackage[cache=true]{minted}
\usemintedstyle{default}
\graphicspath{{./images/}}
\newminted{cpp}{frame=lines,framerule=2pt}
\allowdisplaybreaks[2]

\tikzstyle{bag} = [align=center]

\lstset{frame=tb,
  language=Haskell,
  aboveskip=3mm,
  belowskip=3mm,
  showstringspaces=false,
  columns=flexible,
  basicstyle={\small\ttfamily},
  numbers=left,
  numberstyle=\tiny\color{gray},
  keywordstyle=\color{blue},
  commentstyle=\color{dkgreen},
  stringstyle=\color{mauve},
  breaklines=true,
  breakatwhitespace=true,
  tabsize=2,
  stepnumber=1,
  escapechar=!
}

\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}

\title{%
      Combinatorial Problem Solving \\
      Final Project - Box Wrapping \\
      SAT
}
\author{%
  Juan Pablo Royo Sales \\
  \small{Universitat PolitÃ¨cnica de Catalunya}
}
\date\today

\pagestyle{fancy}
\fancyhf{}
\fancyhead[C]{}
\fancyhead[R]{Juan Pablo Royo Sales - UPC MIRI}
\fancyhead[L]{CPS - Final Project - SAT}
\fancyfoot[L,C]{}
\fancyfoot[R]{Page \thepage{} of \pageref{LastPage}}
\setlength{\headheight}{15pt}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}

\DeclareMathOperator*{\argmax}{argmax}
\DeclareMathOperator*{\st}{st}

\newacronym{lp}{LP}{Linear Programming}
\newacronym{cp}{CP}{Constraint Programming}
\newacronym{sat}{SAT}{SAT}

\begin{document}

\maketitle

\section{Predefinitions}
Values given by the state the of the program.

\begin{itemize}
  \item $1 \leq W \leq 11$ maximum width paper roll
  \item $L$ maximum length paper roll. By definition is infinite
  \item $B = \{1, \dots, n\}$ total number of Boxes
  \item $w_b$ Width of the Box $b, b \in B$
  \item $h_b$ Height of the Box $b, b \in B$
\end{itemize}

\section{Propositional Formulas - Formal Definition}
Given the statement of the problem proposed, we are going to define the following propositions for our \acrfull{sat} solution.

\subsection{Literals}
I have defined the following literals:

\begin{itemize}
  \item $tl_{bwl} \quad \forall b \in B, w \in W, l \in L$: These literals are going to represent where each box has its \textbf{top left $x$} coordinate, where $b$ is the Box, and $w, l$ are the coordinates.\label{var:tl}
  \item $cl_{bwl} \quad \forall b \in B, w \in W, l \in L$: These literals are going to represent that every cell $w, l$ it is occupied by a box $b$.\label{var:cl}
  \item $r_b \quad \forall b \in B$: One literal per box $b$ indicating rotation or not.\label{var:r}
\end{itemize}

\subsection{Propositional Formulas}

\begin{enumerate}
  \item $tl_{000} = 1$: Put \textbf{first box}\footnote{I am descendent ordering boxes according their size $width \times height$, before building the clauses}  in the first coordinate.\label{prop:1}
  \item $\sum_{b=1}^{B-1} tl_{bij} = 1 \quad \forall i \in W, j \in L$: \textbf{Exactly One} position for top left box $b$. \label{prop:2}
  \item $\sum_{i=0}^{W-1} \sum_{j=0}{L-1} cl_{bij} \geq 1 \quad \forall b \in B$: \textbf{At Most One} box per position in the roll. \label{prop:3}
  \item \textbf{Extended Cells}: This is for controlling that a particular box expands its position according to its width and height taking into consideration rotation \label{prop:4}

   \begin{equation}
    \begin{cases}
      (\lnot tl_{bxy} \lor cl_{bxy}) \land \lnot r_b \ \\
        \forall b \in B, x \in {i, \dots, i + w_b - 1}, y \in {y, \dots, y + h_b - 1}  & w_b = h_b \\\\
      (\lnot tl_{bxy} \lor cl_{bxy} \lor r_b) \land (\lnot tl_{bxy} \lor cl_{bxy} \lor \lnot r_b) \ \\
        \forall b \in B, x \in {i, \dots, i + w_b - 1}, y \in {y, \dots, y + h_b - 1} & w_b \neq h_b
    \end{cases}
  \end{equation}

\item \textbf{Control Cell Bounds}: This is for control that a particular \textbf{top left} cell is not going to out of bound the box according to its width and height taking into consideration possible rotations.\label{prop:5}

   \begin{equation}
    \begin{cases}
      \lnot tl_{bij} \ \forall b \in B, i \in W, j \in L & w_b = h_b, i+w_b > W \lor j+h_b > L \\\\
      (r_b \lor \lnot tl_{bij}) \land (\lnot r_b \lor \lnot tl_{bij}) \ \forall b \in B, i \in W, j \in L & w_b \neq h_b, i+w_b > W \lor j+h_b > L
    \end{cases}
  \end{equation}

\end{enumerate}

\subsection{Implementation}

\end{document}

