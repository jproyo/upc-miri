\documentclass[12pt, a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{array}
\usepackage{graphicx}
\usepackage{parskip}
\usepackage[pdfencoding=auto]{hyperref}
\usepackage{fancyhdr}
\usepackage{lastpage}
\usepackage{tikz}
\usepackage{float}
\usepackage{listings}
\usepackage{color}
\usepackage{caption}
\usepackage{authblk}
\usepackage{longtable}
\usepackage[acronym]{glossaries}
\usepackage[nottoc]{tocbibind}
\usepackage[cache=false]{minted}
\usemintedstyle{default}
\newminted{haskell}{frame=lines,framerule=2pt}
\newminted{R}{frame=lines,framerule=2pt}
\graphicspath{{./images/}}

\tikzstyle{bag} = [align=center]

\title{%
      A Report of \textit{Type Theory and Formal Proof}
}
\author{Juan Pablo Royo Sales}
\affil{Universitat Polit√®cnica de Catalunya}
\date\today

\pagestyle{fancy}
\fancyhf{}
\fancyhead[C]{}
\fancyhead[R]{UPC MIRI}
\fancyhead[L]{SIRI - Guided Work}
\fancyfoot[L,C]{}
\fancyfoot[R]{Page \thepage{} of \pageref{LastPage}}
\setlength{\headheight}{15pt}
\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0.4pt}

\newacronym{lc}{$\lambda$-\textit{calculus}}{Lambda Calculus}
\newacronym{br}{$\beta$-\textit{reduction}}{Beta Reduction}
\newacronym{lt}{$\lambda$-\textit{term}}{Lambda Terms}

\newtheorem{hyp}{Hypothesis}

\begin{document}

\maketitle

\tableofcontents

\section{Introduction}
This report is going to provide a summary over the book~\cite{type_theory}.
Alongside the different chapters of the book I am going to describe briefly the most important parts of each chapter and, at the same time,
I am going to solve 1 or 2 of the exercises proposed by the authors.

The organization of the report is going to be the same as the chapters of the book.

\section{Untyped lambda calculus}
In this first chapter the authors define and describe \acrfull{lc} system which encapsulates the formalization of basic aspects
of mathematical functions, in particular construction and use. In \acrshort{lc} formalization system there are \textit{typed} and \textit{untyped} 
formalization of the same system. In this first case authors introduced the first basic and simple formalization which is \textit{untyped}.

\subsection{Definition}
There are \textit{two constructions principles} and \textit{one evaluation rule}

\textbf{Construction principles:}

\begin{itemize}
    \item \textit{Abstraction:} Given an expression $M$ and a variable $x$ we can construct the expression: $\lambda x.M$. This is abstraction of $x$ over $M$
    Example: $\lambda y.(\lambda x. x - y)$ Abstraction of $y$ over $\lambda x. x - y$
    \item \textit{Application:} Given 2 expressions $M$ and $N$ we can construct the expression: $M\ N$. This is the application of $M$ to $N$.
    Example: $(\lambda x.x^2 + 1)(3)$ Application of $3$ over $\lambda x.x^2 + 1$
\end{itemize}

\textbf{Evaluation Rule:} Formalization of this process is called \acrfull{br}. 
\acrshort{br}: An expression $(\lambda x. M)N$ can be rewritten to $M[x := N]$, which means every $x$ should be replaced by $N$ in $M$. This process 
is called \acrshort{br} of $(\lambda x. M)N$ to $M[x := N]$.

Example: $(\lambda x. x^2 + 1)(3)$ reduces to $(x^2 + 1)[x := 3]$, which is $3^2 + 1$.

In this book, functions on \acrshort{lc} notation are \textit{Curried}.

\subsubsection{Lambda-terms}
Expressions in \acrshort{lc} are called \acrfull{lt}

\newtheorem{definition}{Definition}
\begin{definition}
    The set $\Lambda$ of all \acrshort{lt}
\end{definition}

\begin{enumerate}
    \item (Variable) If $u \in V$, then $u \in \Lambda$ \\
    Example: $x$, $y$, $z$
    \item (Application) If $M$ and $N \in \Lambda$, then $(MN) \in \Lambda$  \\
    Example: $(x y)$, $(x(x y))$
    \item (Abstraction) If $u \in V$ and $M \in \Lambda$, then $(\lambda u. M) \in \Lambda$  \\
    Example: $(\lambda x. (x z))$, $(\lambda y. (\lambda z. x))$
\end{enumerate}


\begin{definition}
    Multiset of subterms $Sub$
\end{definition}

\begin{enumerate}
    \item (Basis) $Sub(x) = \{x\}$, for each $x \in V$
    \item (Application) $Sub((MN)) = Sub(M) \cup Sub(N) \cup \{(MN)\}$
    \item (Abstraction) $Sub((\lambda x. M)) = Sub(M) \cup \{(\lambda x. M)\}$
\end{enumerate}

\newtheorem{lemma}{Lemma}
\begin{lemma}
    (1) (Reflexivity) For all \acrshort{lt} $M$, we have $M \in Sub(M)$. 
    (2) (Transitivity) If $L \in Sub(M)$ and $M \in Sub(N)$, then $L \in Sub(N)$.
\end{lemma}

\begin{definition}[Proper subterm]
    $L$ is a proper subterm of $M$ if $L$ is a subterm of $M$, but $L \not\equiv M$
\end{definition}

\begin{itemize}
    \item Parenthesis can be omitted
    \item Application is lef-associative, $MNL$ is $((MN)L)$
    \item Application takes precedence over Abstraction
\end{itemize}

\subsection{Free and bound variables}
Variables can be \textit{free}, \textit{bound} and \textit{binding}. A variable $x$ which is \textit{free} in $M$ becomes \textit{bound}
in $\lambda x. M$. $M$ is called a \textit{binding} variable occurrence.
\begin{definition}[FV, set of free variables of a \acrshort{lt}]
\end{definition}
\begin{enumerate}
    \item (Variable) $FV(x) = \{x\}$
    \item (Application) $FV(MN) = FV(M) \cup FV(N)$
    \item (Abstraction) $FV(\lambda x. M) = FV(M) \setminus \{x\}$
\end{enumerate}

\begin{definition}[Closed \acrshort{lt}; combinator; $\Lambda^0$]
    The \acrshort{lt} $M$ is closed if $FV(M) = \emptyset$. This is also called a combinator.
    The set of all closed \acrshort{lt} is denoted by $\Lambda^0$ 
\end{definition}

\subsubsection{Alpha conversion}
It is based on the possibility of renaming bound and binding variables.

\begin{definition}[Renaming; $M^{x \rightarrow y}$; $=_\alpha$]\label{def:6}
    Let $M^{x \rightarrow y}$ denote the result of replacing every free ocurrence of $x$ in $M$ by $y$.
    Renaming, expressed by $=_\alpha$ is defined as: $\lambda x. M =_\alpha \lambda y. M^{x \rightarrow y}$, provided
    that $y \notin FV(M)$ and $y$ is not binding in $M$
\end{definition}

\begin{definition}[$\alpha$-convertion or $\alpha$-equivalence; $=_\alpha$]
\end{definition}
\begin{enumerate}
    \item (Renaming) same as~\ref{def:6}
    \item (Compatibility) If $M =_\alpha N$, then $ML =_\alpha NL$, $LM =_\alpha LN$ and, for any arbitrary $z$, $\lambda z. M =_\alpha \lambda z. N$
    \item (Reflexivity) $M =_\alpha M$
    \item (Symmetry) If $M =_\alpha N$ then $N =_\alpha M$
    \item (Transitivity) If both $L =_\alpha M$ and $M =_\alpha N$, then $L =_\alpha N$
\end{enumerate}

\subsection{Substitution}
\begin{definition}[Substitution]
\end{definition}
\begin{enumerate}
    \item $x[x := N] \equiv N$
    \item $y[x := N] \equiv y$ if $x \not\equiv y$
    \item $(PQ)[x := N] \equiv (P[x := N])(Q[x := N])$
    \item $(\lambda y. P)[x := N] \equiv \lambda z. (P^{y \rightarrow z}[x := N])$, if $\lambda z. P^{y \rightarrow z}$ is $\alpha$-variant of $\lambda y.P$ such that $z \notin FV(N)$
\end{enumerate}

\subsection{Beta reduction}
\begin{definition}[One-step $\beta$-reduction, $\rightarrow_\beta$]    
\end{definition}
\begin{enumerate}
    \item (Basis) $(\lambda x. M)N \rightarrow_\beta M[x := N]$,\label{def:9:1}
    \item (Compatibility) If $M \rightarrow_\beta N$, then $ML \rightarrow_\beta NL$, $LM \rightarrow_\beta LN$ and $\lambda x. M \rightarrow_\beta \lambda x. N$
\end{enumerate}

In~\ref{def:9:1} the left part of $\rightarrow_\beta$ is called \textit{redex} (reducible expression), and the right
side is called \textit{contractum} (of the redex).

\begin{definition}[$\beta$-reduction (zero-or-more-step), $\twoheadrightarrow\beta$]
$M \twoheadrightarrow_\beta N$ if there is an $n \geq 0$ and there are terms $M_0$ to $M_n$ such that $M_0 \equiv M$, $M_n \equiv N$ and for all $i, 0 \leq i < n$:\\
$M_i \rightarrow_\beta M_{i+1}$
\end{definition}
Hence, if $M \twoheadrightarrow_\beta N$, there exists a chain of single-step $\beta$-reductions, starting with $M$ and ending with $N$:

$M \equiv M_0 \rightarrow_\beta M_1 \rightarrow_\beta M_2 \rightarrow_\beta \dots \rightarrow_\beta M_{n-2} \rightarrow_\beta M_{n-1} \rightarrow_\beta M_n \equiv N$

\begin{definition}[$\beta$-conversion, $\beta$-equality; $=_\beta$]
    $M =_\beta N$ if there is an $n \geq 0$ and there are terms $M_0$ to $M_n$ such that $M_0 \equiv M$, $M_n \equiv N$ and for all $i, 0 \leq i < n$:\\
    either $M_i \rightarrow_\beta M_{i+1}$ or $M_{i+1} \rightarrow_\beta M_i$
\end{definition}

\subsection{Fixed Point Theorem}
\newtheorem{theorem}{Theorem}
\begin{theorem}
    For all $L \in \Lambda$ there is $M \in \Lambda$ such that $LM =_\beta M$
\end{theorem}
\begin{proof}
    For given $L$, define $M := (\lambda x. L(xx))(\lambda x. L(xx))$
    This $M$ is a redex, so we have:
    \begin{subequations}
        \begin{align}
            M &\equiv (\lambda x. L(xx))(\lambda x. L(xx))\\
              &\rightarrow_\beta L((\lambda x. L(xx))(\lambda x. L(xx)))\\
              &\equiv LM
        \end{align}
    \end{subequations}
Therefore, $LM =_\beta M$
\end{proof}
\bibliographystyle{alpha}
\bibliography{type_theory}

\end{document}


