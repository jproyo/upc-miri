# Box Wrapping Problem - SAT

This README file only contains instruction to running the program and does NOT contain specifications about the problem or the solution.

## Folder Structure

- **`bin`**: Folder with compiled binaries for checker only. The content of this folder is deleted on `make clean` task.
- **`docs`**: Latex and PDF generated report with the formal specification of the solution.
- **`instances`**: Instances provided to test against the solution. Input of the program.
- **`out`**: Output with the solution of each instance.

    > NOTE: We are delivering the solutions obtained in the best running of the program. If you want to clean up this folder, please first save this outputs files in other place.

- **`src`**: Haskell Source Code Solution needed to solve the problem
- `Makefile`: To build **ONLY** `checker` binary program
- `run_script.sh`: Scripting file to run all instances under **`instance`** folder.
- `run_checker.sh`: Scripting file to check all results under **`out`** folder.

    > NOTE: Running this will overwrite out files and you might lost previous running. Please check Running with Script section.

## Formal Documentation

In order to see the report in which it is described the formal definition of the solution go [here](docs/report.pdf)

## Prerequisites to running the program

You need to install **Stack** which is building and dependency manager tool for **Haskell**

Stack documentation for installing can be found [here](https://docs.haskellstack.org/en/stable/README/) but i will provide the basic installation process which in Linux is quite easy:

```shell
curl -sSL https://get.haskellstack.org/ | sh
```

or

```shell
wget -qO- https://get.haskellstack.org/ | sh
```

After this you need to have `stack` executable in your system.

> IMPORTANT: The first time you build the project is going to take a lot of time. Maybe 20 minutes or so, because it needs to download all dependencies, GHC (which is Haskell compiler) and compile from scratch. In contrast with C++, Dependencies in Haskell are pure Source Code that is downloaded to your machine and compile there. Once the first building is done after the compilation it is a matter of seconds.

## Running the Program

### Compiling

Once you did that, you can just run in the root of the project where `stack.yaml` is located:

```shell
> stack build
```

### Help

```shell
> stack exec sat -- --help
```

### Running for One Input

For running the program for one input just do:

```shell
> stack exec sat < input

```

### Running for One Input and dump CNF

For running the program for one input and dumpling CNF model to `dump` folder just do:

```shell
> stack exec sat -- -d < input
```

### Running for One Input with Logarithmic Encoder

By default as It is mentioned in the report the program run with **Heule Encoding**. If you want to run **Logarithmic** just do the following:

```shell
> stack exec sat -- -l < input
```

## Running with Script

In the root of this project there is a script file called `run_script.sh`. With this file you can run all the instances provided in `instance` folder and it is going to output the results in `out` folder.

> WARNING: Running this script might overwrite the output files already present in out folder if those output has the same name.

```shell
> ./run_script.sh
```

## Running Program to check Optimum
This program was built to parse `results.txt` provided with the materials of the exercise and compare with all the outputs generated by `run_script.sh`

```shell
> stack exec checker
```

The output of this program is going to show if the solution is the same or the difference otherwise.
